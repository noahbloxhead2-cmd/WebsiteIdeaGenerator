<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Website Idea Generator</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #0f172a;
      color: #e5e7eb;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
    }
    .container {
      max-width: 800px;
      width: 100%;
      padding: 24px;
      box-sizing: border-box;
    }
    h1 {
      margin-top: 0;
      font-size: 2rem;
      color: #f97316;
    }
    label {
      display: block;
      margin-top: 16px;
      font-weight: 600;
      color: #e5e7eb;
    }
    textarea, input, select {
      width: 100%;
      margin-top: 6px;
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #4b5563;
      background: #020617;
      color: #e5e7eb;
      box-sizing: border-box;
      resize: vertical;
    }
    textarea {
      min-height: 60px;
    }
    button {
      margin-top: 20px;
      padding: 10px 18px;
      border-radius: 999px;
      border: none;
      background: #f97316;
      color: #020617;
      font-weight: 600;
      cursor: pointer;
    }
    button:disabled {
      opacity: 0.6;
      cursor: default;
    }
    .output {
      margin-top: 24px;
      padding: 16px;
      border-radius: 8px;
      background: #020617;
      border: 1px solid #4b5563;
      white-space: pre-wrap;
      font-family: system-ui, sans-serif;
    }
    .status {
      margin-top: 8px;
      font-size: 0.9rem;
      color: #9ca3af;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Website Idea Generator</h1>
    <p>Fill in a few details, then let Gemma pitch you a website concept.</p>

    <label for="audience">Target audience</label>
    <textarea id="audience" placeholder="e.g. college students who love indie games"></textarea>

    <label for="goal">Main goal of the website</label>
    <textarea id="goal" placeholder="e.g. help them discover new games and connect with small devs"></textarea>

    <label for="content">Type of content or features</label>
    <textarea id="content" placeholder="e.g. reviews, curated lists, forums, live events, newsletters"></textarea>

    <label for="style">Vibe / visual style</label>
    <textarea id="style" placeholder="e.g. cozy, neon cyberpunk, minimalist, playful, serious"></textarea>

    <label for="constraints">Constraints or preferences</label>
    <textarea id="constraints" placeholder="e.g. should be simple to build, mobile-first, no logins, etc."></textarea>

    <button id="generateBtn">Generate Website Idea</button>
    <div class="status" id="status"></div>

    <div class="output" id="output" placeholder="Your website idea will appear here..."></div>
  </div>

  <script>
    const OLLAMA_URL = "http://100.127.91.63:11434/api/generate"; // change if your Tailscale IP changes
    const MODEL_NAME = "gemma:latest";

    const audienceEl = document.getElementById("audience");
    const goalEl = document.getElementById("goal");
    const contentEl = document.getElementById("content");
    const styleEl = document.getElementById("style");
    const constraintsEl = document.getElementById("constraints");
    const generateBtn = document.getElementById("generateBtn");
    const outputEl = document.getElementById("output");
    const statusEl = document.getElementById("status");

    function buildPrompt() {
      const audience = audienceEl.value.trim() || "no specific audience given";
      const goal = goalEl.value.trim() || "no specific goal given";
      const content = contentEl.value.trim() || "no specific content preferences given";
      const style = styleEl.value.trim() || "no specific visual style given";
      const constraints = constraintsEl.value.trim() || "no specific constraints";

      return `
You are a creative product designer and UX thinker.

Based on the following inputs, propose ONE strong website idea. 
Give the answer in this structure:

1) Name of the website
2) One-sentence elevator pitch
3) Target audience
4) Core value proposition
5) Key features (bullet list)
6) Visual style & tone
7) Possible monetization or sustainability ideas
8) Why this idea is interesting / unique

Inputs from the user:
- Target audience: ${audience}
- Main goal of the website: ${goal}
- Desired content / features: ${content}
- Vibe / visual style: ${style}
- Constraints / preferences: ${constraints}

Now generate the idea in a clear, friendly format.
      `.trim();
    }

    async function generateIdea() {
      const prompt = buildPrompt();
      outputEl.textContent = "";
      statusEl.textContent = "Generating idea with Gemma...";
      generateBtn.disabled = true;

      try {
        const response = await fetch(OLLAMA_URL, {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            model: MODEL_NAME,
            prompt: prompt,
            stream: false
          })
        });

        if (!response.ok) {
          throw new Error("HTTP " + response.status + " - " + response.statusText);
        }

        const data = await response.json();

        // Ollama /api/generate returns { response: "...", ... }
        const text = data.response || JSON.stringify(data, null, 2);
        outputEl.textContent = text;
        statusEl.textContent = "Done.";
      } catch (err) {
        console.error(err);
        statusEl.textContent = "Error talking to Ollama. Check console and OLLAMA_URL.";
        outputEl.textContent = String(err);
      } finally {
        generateBtn.disabled = false;
      }
    }

    generateBtn.addEventListener("click", generateIdea);
  </script>
</body>
</html>
